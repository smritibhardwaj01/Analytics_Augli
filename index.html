<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Analytics</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" media="screen" href="style.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    
    <script src="main.js"></script>
</head>
<body>
    <select id='filterSchool' style='display:inline-block' onchange='filterSchool()'>
            <option value='Indus Indore'>Indore</option>
            <option value='LP Chandigarh'>Chandigarh</option>
            <option value='Indus Ludhiana'>Ludhiana</option>
            <option value='Indus Gurgaon'>Gurgaon</option>
            <option selected>All</option>
    </select>

    <select id='filterDate' style='display:inline-block' onchange='filterDate()'>
            <option value='' id="currentDate1" ></option>
            <option value='' id="currentDate2"></option>
            <option value='' id="currentDate3"></option>
            <option value='' id="currentDate4"></option>
            <option value='' id="currentDate5"></option>
            <option selected>All</option>
    </select>

    <table class="table table-bordered" id="macroTable">
        <tr>
            <th>Total number of active users</th>
            <th>Total time spent by the users</th>
            <th>Average time spent per user</th>
            <th>Average number of activities done by the user</th>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </table>



    <table class="table table-bordered" id="myTable">
        <tr>
          <th>#</th>
          <th>User Name</th>
          <th>Name</th> 
          <th>Grade</th>
          <th>School</th>
          <th>Duration (sec)</th>
          <th>Date</th>
          <th>Timestamp</th>
          <th>Total Acitivities</th>
          <th>Grammar Activities</th>
          <th>Last Activity</th>
          <!-- <th>Score</th>
          <th>Percentage</th>
          <th>Bookmarks</th>
          <th>POS</th>
          <th>Grammar Scores</th>
          <th>Comprehension score</th>
          <th>Factual score</th>
          <th>Bookmark score</th>
          <th>Pace score</th> -->
        </tr>
        
      </table>

<script>
    var d1 = new Date();
    var year = d1.getFullYear();
    var month = d1.getMonth();
    var date1 = d1.getDate();
    var dateString1 = year+"-"+month+"-"+date1;
    var date2 = date1-1;
    var dateString2 = year+"-"+month+"-"+date2;
    var date3 = date1-2;
    var dateString3 = year+"-"+month+"-"+date3;
    var date4 = date1-3;
    var dateString4 = year+"-"+month+"-"+date4;
    var date5 = date1-4;
    var dateString5 = year+"-"+month+"-"+date5;
    document.getElementById("currentDate1").innerHTML = dateString1;
    document.getElementById("currentDate2").innerHTML = dateString2;
    document.getElementById("currentDate3").innerHTML = dateString3;
    document.getElementById("currentDate4").innerHTML = dateString4;
    document.getElementById("currentDate5").innerHTML = dateString5;

    $(document).ready(function(){
        $.getJSON("main.json",function(data){
            var student = '';
            $.each(data,function(key,value){
                student += '<tr>';
                student += '<td>'+value.id+'</td>';
                student += '<td>'+value.user_name+'</td>';
                student += '<td>'+value.name+'</td>';
                student += '<td>'+value.grade+'</td>';
                student += '<td>'+value.school+'</td>';
                student += '<td>'+value.duration+'</td>';
                student += '<td>'+value.date+'</td>';
                student += '<td>'+value.Timestamp+'</td>';
                student += '<td>'+value.n_activity+'</td>';
                student += '<td>'+value.n_grammar+'</td>';
                student += '<td>'+value.n_last+'</td>';
                student += '</tr>';
            });
            $('#myTable').append(student);
        });
    });
</script>
</body>
</html>